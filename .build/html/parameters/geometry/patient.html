<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html"><link rel="next" title="Particle Sources" href="../source/index.html"><link rel="prev" title="Specialized Components" href="specialized.html">
        <link rel="prefetch" href="../../_static/logo_with_background.png" as="image">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Patient Components - TOPAS</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=577e202f" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../../_static/dark_background.css?v=207d4a1c" />
    <link rel="stylesheet" type="text/css" href="../../_static/text_justification.css?v=3987e263" />
    <link rel="stylesheet" type="text/css" href="../../_static/table_format.css?v=dfcdc9fb" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">TOPAS</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/logo_with_background.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../getting-started/install.html">Installation</a><input aria-label="Toggle navigation of Installation" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/MacOS.html">QuickStart Guide for MacOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/Debian.html">QuickStart Guide for Debian</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/WSL.html">QuickStart Guide for WSL</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/authors.html">Authors and Funding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/citation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/users.html">User Support and Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/G4_version.html">Geant4 Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Simulation Control</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../intro/index.html">Parameter Control System</a><input aria-label="Toggle navigation of Parameter Control System" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/design.html">Design Philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/syntax.html">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/syntax_highlighting.html">Syntax highlighting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/relative.html">Relative Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/hierarchy.html">Hierarchical Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/batch_jobs.html">Controlling Multiple Batch Jobs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../defaults.html">Default Parameters</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../overall/index.html">Overall Control</a><input aria-label="Toggle navigation of Overall Control" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../overall/mode.html">Time mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overall/multithreading.html">Multithreading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overall/seed.html">Random Number Seed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overall/repeatsequenceuntil.html">Set run duration based on statistical goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overall/misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../material.html">Materials</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Geometry Components</a><input aria-label="Toggle navigation of Geometry Components" checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="placement.html">Placement of Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel_world.html">Parallel Worlds</a></li>
<li class="toctree-l2"><a class="reference internal" href="field.html">Electromagnetic Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualization.html">Visualization Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="dividable.html">Dividable Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic.html">Generic Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="group.html">Group Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="specialized.html">Specialized Components</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Patient Components</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../source/index.html">Particle Sources</a><input aria-label="Toggle navigation of Particle Sources" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../source/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../source/beam.html">Beam Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../source/distributed.html">Distributed Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../source/emittance.html">Emittance Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../source/environment.html">Environment Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../source/isotropic.html">Isotropic Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../source/volumetric.html">Volumetric Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../source/phasespace.html">Phase Space Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../source/misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../physics/index.html">Physics</a><input aria-label="Toggle navigation of Physics" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../physics/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../physics/modular.html">Modular Physics Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../physics/reference.html">Reference Physics Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../physics/optical.html">Optical Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../physics/misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../scoring/index.html">Scoring</a><input aria-label="Toggle navigation of Scoring" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../scoring/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scoring/volume.html">Volume Scorers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scoring/surface.html">Surface Scorers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scoring/phasespace.html">Phase Space Scorer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scoring/filter.html">Filtering Scorers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scoring/output.html">Output Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scoring/misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../graphics.html">Graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../time.html">Time Features</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../variance/index.html">Variance Reduction</a><input aria-label="Toggle navigation of Variance Reduction" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../variance/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variance/geometrical_particle_split.html">Geometrical Particle Splitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variance/importance_sampling.html">Importance Sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variance/weight_window.html">Weight Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variance/specific_particles.html">Tracking Only Specific Particles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variance/secondary_biasing.html">Secondary Biasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variance/forced_interaction.html">Forced interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variance/periodic_boundary.html">Periodic Boundary Condition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variance/crosssection_enhancement.html">Cross section enhancement</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../outcome.html">Outcome Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GUI.html">TOPAS Graphical User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameter_optimization.html">Parameter Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples-docs/MVLinac/intro.html">IEC: LINAC Treatment Head Simulation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Parameter Files</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/Basic/index.html">Basic</a><input aria-label="Toggle navigation of Basic" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/AllParameterForms.html">AllParameterForms.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/BatchJob1.html">BatchJob1.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/BatchJob2.html">BatchJob2.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/BatchJobShared.html">BatchJobShared.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/BoxRotatedAroundItsCorner.html">BoxRotatedAroundItsCorner.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/DistributedSourcePointsInShell.html">DistributedSourcePointsInShell.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/DistributedSourcePointsInSphereGaussian.html">DistributedSourcePointsInSphereGaussian.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/DistributedSourcePointsInSphere.html">DistributedSourcePointsInSphere.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/DistributedSourcePointsInTwistedTubs.html">DistributedSourcePointsInTwistedTubs.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/DividedComponents.html">DividedComponents.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/DNAModelByRegions.html">DNAModelByRegions.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/Emittance_Gaussian.html">Emittance_Gaussian.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/Emittance_Twiss.html">Emittance_Twiss.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/EmModelByRegions.html">EmModelByRegions.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/EnvironmentSource.html">EnvironmentSource.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/ExtraSequence1.html">ExtraSequence1.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/ExtraSequence2.html">ExtraSequence2.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/ExtraSequences.html">ExtraSequences.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/FlatteningFilter.html">FlatteningFilter.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/Isotope.html">Isotope.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/LayeredMassGeometry.html">LayeredMassGeometry.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/OneBox.html">OneBox.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/OneBoxRotate.html">OneBoxRotate.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/OneBoxTranslate.html">OneBoxTranslate.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/ParallelWorlds.html">ParallelWorlds.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/ParticleSourcesFromGroup.html">ParticleSourcesFromGroup.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/PhysicsSetting.html">PhysicsSetting.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/QtShapeTest.html">QtShapeTest.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/ShapeTestWithAllParameters.html">ShapeTestWithAllParameters.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/ShapeTestWithOnlyRequiredParameters.html">ShapeTestWithOnlyRequiredParameters.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/Spectrum.html">Spectrum.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/TwoBeams.html">TwoBeams.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/VolumetricSource.html">VolumetricSource.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Basic/VoxelMaterialsInDividedComponents.html">VoxelMaterialsInDividedComponents.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/Brachytherapy/index.html">Brachytherapy</a><input aria-label="Toggle navigation of Brachytherapy" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/intro.html">Brachytherapy package for TOPAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/DoseTLE.html">DoseTLE.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/HDRSource.html">HDRSource.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/HDRSourceInApplicator.html">HDRSourceInApplicator.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/Ir192_Flexisource.html">Ir192_Flexisource.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/Ir192_MicroSelectronV2.html">Ir192_MicroSelectronV2.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/Ir192_TG186.html">Ir192_TG186.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/TG186Applicator.html">TG186Applicator.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/LDRSource.html">LDRSource.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/Cs131_IsoRay-CS-1-Rev2.html">Cs131_IsoRay-CS-1-Rev2.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/I125_BardSTM1251.html">I125_BardSTM1251.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/I125_Best2301.html">I125_Best2301.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/I125_IsoAid_IAI-125A.html">I125_IsoAid_IAI-125A.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/I125_OncoSeed6711.html">I125_OncoSeed6711.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/I125_SelectSeed.html">I125_SelectSeed.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/I125_SL-125.html">I125_SL-125.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/I125_Theragenic-AgX100.html">I125_Theragenic-AgX100.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/Pd103_Best2335.html">Pd103_Best2335.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/Pd103_IAPd103A.html">Pd103_IAPd103A.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/Pd103_Theraseed200Heavy.html">Pd103_Theraseed200Heavy.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/Pd103_Theraseed200Light.html">Pd103_Theraseed200Light.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/EyeModel.html">EyeModel.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Brachytherapy/COMSEyePlaque.html">COMSEyePlaque.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/Graphics/index.html">Graphics</a><input aria-label="Toggle navigation of Graphics" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorByCharge.html">ColorByCharge.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorByCreatorProcess.html">ColorByCreatorProcess.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorByEnergy.html">ColorByEnergy.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorByGeneration.html">ColorByGeneration.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorByMomentum.html">ColorByMomentum.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorByOriginComponent.html">ColorByOriginComponent.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorByOriginComponentOrSubComponent.html">ColorByOriginComponentOrSubComponent.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorByOriginVolume.html">ColorByOriginVolume.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorByParticleType.html">ColorByParticleType.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ColorTest.html">ColorTest.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/FilterByCreatorProcess.html">FilterByCreatorProcess.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/FilterByEnergy.html">FilterByEnergy.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/FilterByMomentum.html">FilterByMomentum.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/FilterByOriginComponent.html">FilterByOriginComponent.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/FilterByOriginComponentOrSubComponent.html">FilterByOriginComponentOrSubComponent.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/FilterByOriginVolume.html">FilterByOriginVolume.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/FilterByParticleCharge.html">FilterByParticleCharge.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/FilterByParticleType.html">FilterByParticleType.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/NanoMeterScaleTest.html">NanoMeterScaleTest.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/ParticleFlight.html">ParticleFlight.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/QtTest.html">QtTest.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/SolidSphere.html">SolidSphere.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/TestGraphics.html">TestGraphics.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Graphics/TwoProjections.html">TwoProjections.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/MVLinac/index.html">MVLinac</a><input aria-label="Toggle navigation of MVLinac" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/intro.html">IEC: LINAC Treatment Head Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/Field.html">Field.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/FixedTxHead.html">FixedTxHead.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/Flattener6MV.html">Flattener6MV.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/Flattener18MV.html">Flattener18MV.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/FullTxHeadField.html">FullTxHeadField.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/Jaws.html">Jaws.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/LinacDefaults.html">LinacDefaults.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/MLC.html">MLC.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/MainTxHead.html">MainTxHead.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/Monitor.html">Monitor.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/ScoreEnergyFluence.html">ScoreEnergyFluence.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/ScoreEnergySpectrum.html">ScoreEnergySpectrum.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/ScorePhaseSpace.html">ScorePhaseSpace.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/Target.html">Target.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/TestComponent.html">TestComponent.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/VRT_1.html">VRT_1b.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/VRT_2.html">VRT_2.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/VRT_3.html">VRT_3.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/VRT_HD.html">VRT_HD.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/WaterBox.html">WaterBox.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/MVLinac/WaterPhantom.html">WaterPhantom.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/Nozzle/index.html">Nozzle</a><input aria-label="Toggle navigation of Nozzle" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/ConstantsForNozzles.html">ConstantsForNozzles.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/RasterScanningPattern.html">RasterScanningPattern.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/ScanningNozzle.html">ScanningNozzle.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/ScanningStationaryTarget.html">ScanningStationaryTarget.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/ScanningTargetMovingHorizontal.html">ScanningTargetMovingHorizontal.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/ScanningTargetMovingInDepth.html">ScanningTargetMovingInDepth.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/ScatteringNozzle.html">ScatteringNozzle.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/ScatteringNozzle_QtTest.html">ScatteringNozzle_QtTest.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/ScatteringNozzle_run.html">ScatteringNozzle_run.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/ScatteringNozzle_run_QtTest.html">ScatteringNozzle_run_QtTest.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/TargetInWaterPhantom.html">TargetInWaterPhantom.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/TsAnalysisWaterPhantom.html">TsAnalysisWaterPhantom.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Nozzle/Viewer.html">Viewer.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/Optical/index.html">Optical</a><input aria-label="Toggle navigation of Optical" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Optical/OpticalMaterialSample.html">OpticalMaterialSample.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Optical/OpticalPhotonCount.html">OpticalPhotonCount.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Optical/PixelatedDetector.html">PixelatedDetector.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Optical/PlasticScintillator.html">PlasticScintillator.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Optical/Rotating_Surfaces.html">Rotating_Surfaces.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Optical/Surfaces.html">Surfaces.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Optical/WavelengthShifter.html">WavelengthShifter.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/Outcome/index.html">Outcome</a><input aria-label="Toggle navigation of Outcome" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Outcome/CEModelBurman.html">CEModelBurman.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Outcome/CVModelStavrev.html">CVModelStavrev.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Outcome/LKMModelBurman.html">LKMModelBurman.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Outcome/Phantom.html">Phantom.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Outcome/PoissonModelOkunieff.html">PoissonModelOkuneff.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Outcome/TestOutcomeModel.html">TestOutcomeModel.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Outcome/TestRestoreModel.html">TestRestoreModel.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/Patient/index.html">Patient</a><input aria-label="Toggle navigation of Patient" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/Applicator.html">Applicator.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/DicomCutaway.html">DicomCutaway.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/DoseTo4DCT.html">DoseTo4DCT.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/DoseToCT.html">DoseToCT.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/HUtoMaterialSchneider.html">HUtoMaterialSchneider.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/HUtoMaterialSchneider2.html">HUtoMaterialSchneider2.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/Implant.html">Implant.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/PatientInIEC_1.html">PatientInIEC_1.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/PatientInIEC_2_time_feature.html">PatientInIEC_2_time_feature.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/PatientInIEC_2.html">PatientInIEC_2.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/PatientInIEC_3.html">PatientInIEC_3.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/TwoDicoms.html">TwoDicoms.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/ViewAbdomen_rtdose.html">ViewAbdomen_rtdose.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/ViewAbdomen.html">ViewAbdomen.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/XCAT_Materials.html">XCAT_Materials.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Patient/XCAT.html">XCAT.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/PhaseSpace/index.html">PhaseSpace</a><input aria-label="Toggle navigation of PhaseSpace" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/MultiRun_Write_ASCII.html">MultiRun_Write_ASCII.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/ReadASCII.html">ReadASCII.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/ReadBinary.html">ReadBinary.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/ReadLimited.html">ReadLimited.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/ReadElekta.html">ReadElekta.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/ReadVarian.html">ReadVarian.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/WriteASCII.html">WriteASCII.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/WriteBinary.html">WriteBinary.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/WriteIonsASCII.html">WriteIonsASCII.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/WriteLimited.html">WriteLimited.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/PhaseSpace/WriteROOT.html">WriteROOT.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/Scoring/index.html">Scoring</a><input aria-label="Toggle navigation of Scoring" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/ChargeInSphere.html">ChargeInSphere.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/Complex.html">Complex.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/DepthDose.html">DepthDose.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/Dose.html">Dose.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/DoseInVoxelMaterials.html">DoseInVoxelMaterials.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/DoseToMediumVsWater.html">DoseToMediumVsWater.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/DoseVolumeHistogram.html">DoseVolumeHistogram.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/EnergyAndDose.html">EnergyAndDose.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/EnergyDepositBinnedByEnergy.html">EnergyDepositBinnedByEnergy.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/EnergyDivisions.html">EnergyDivisions.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/EnergyInBinnedCylinder.html">EnergyInBinnedCylinder.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/FilterByInteractionCount.html">FilterByInteractionCount.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/Filters.html">Filters.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/FoilToBox.html">FoilToBox.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/FoilToCylinder.html">FoilToCylinder.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/FoilToSphere.html">FoilToSphere.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/Gated.html">Gated.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/GeometryDivisions.html">GeometryDivisions.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/Histograms.html">Histograms.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/Inactive.html">Inactive.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/Ion.html">Ion.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/Origin.html">Origin.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/OriginCount.html">OriginCount.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/ParallelBoxRebinned.html">ParallelBoxRebinned.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/SparsifyAndSingleIndex.html">SparsifyAndSingleIndex.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/SplitByTimeFeature.html">SplitByTimeFeature.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/Surfaces.html">Surfaces.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/Scoring/VoxelMaterials.html">VoxelMaterials.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/SpecialComponents/index.html">SpecialComponents</a><input aria-label="Toggle navigation of SpecialComponents" class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/CAD.html">CAD.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/DipoleMagnet.html">DipoleMagnet.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/MultiLeafCollimator.html">MultiLeafCollimator.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/MultiLeafCollimator_sequence.html">MultiLeafCollimator_sequence.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/MultiWire_Chamber.html">MultiWire_Chamber.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/Propeller_ContinuousRotation.html">Propeller_ContinuousRotation.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/Propeller_StepRotation.html">Propeller_StepRotation.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/Propeller.html">Propeller.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/PurgingMagnet_move.html">PurgingMagnet_move.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/QuadAndDipoleMagnets.html">QuadAndDipoleMagnets.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/QuadInMovingNozzle.html">QuadInMovingNozzle.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/QuadrupoleMagnet.html">QuadrupoleMagnet.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/RangeModulator_ConstantBeam.html">RangeModulator_ConstantBeam.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/RangeModulator_CurrentModulatedBeam.html">RangeModulator_CurrentModulatedBeam.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/RangeModulator.html">RangeModulator.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/RidgeFilter.html">RidgeFilter.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/RotatingMagnet.html">RotatingMagnet.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/SpecialComponents/UniformElectroMagneticField.html">UniformElectroMagneticField.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/TimeFeature/index.html">TimeFeature</a><input aria-label="Toggle navigation of TimeFeature" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/BoxWithinBox.html">BoxWithinBox.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/CameraRotateAndZoom.html">CameraRotateAndZoom.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/ChangingKEFilterByTimeFeature.html">ChangingKEFilterByTimeFeature.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/ColorChange.html">ColorChange.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/CylinderGrowingInPhi.html">CylinderGrowingInPhi.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/Darkening.html">Darkening.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/Logo.html">Logo.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/RasterScanOnMovingTarget.html">RasterScanOnMovingTarget.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/RotateResizeRecolor.html">RotateResizeRecolor.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/RotatingCylinderWithPhiCut.html">RotatingCylinderWithPhiCut.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/Rotation.html">Rotation.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/RunRandom_Mode.html">RunRandom_Mode.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/TimeFeature/RunSequential_Mode.html">RunSequential_Mode.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/UCSFETF/index.html">UCSFETF</a><input aria-label="Toggle navigation of UCSFETF" class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/UCSF_Beamline_Base.html">UCSF_Beamline_Base.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/UCSF_Beamline_Propeller10.html">UCSF_Beamline_Propeller10.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/UCSF_Beamline_Propeller15.html">UCSF_Beamline_Propeller15.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/UCSF_Beamline_Propeller20.html">UCSF_Beamline_Propeller20.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/UCSF_Beamline_Propeller24.html">UCSF_Beamline_Propeller24.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/UCSF_DefaultParameters.html">UCSF_DefaultParameters.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/UCSF_WaterPhantom.html">UCSF_WaterPhantom.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/User_Beamline_WC_Viewer.html">User_Beamline_WC_Viewer.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/User_BP_R28_WaterPhantom.html">User_BP_R28_WaterPhantom.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/User_SOBP24_R28_WaterPhantom.html">User_SOBP24_R28_WaterPhantom.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/User_SOBP24_Viewer.html">User_SOBP24_Viewer.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/UCSFETF/Viewer.html">Viewer.txt</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples-docs/VarianceReduction/index.html">VarianceReduction</a><input aria-label="Toggle navigation of VarianceReduction" class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/VarianceReduction/AmbientDoseEquivalent.html">AmbientDoseEquivalent.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/VarianceReduction/CrossSectionEnhancement.html">CrossSectionEnhancement.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/VarianceReduction/ForcedInteraction.html">ForcedInteraction.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/VarianceReduction/GeometricalParticleSplit.html">GeometricalParticleSplit.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/VarianceReduction/ImportanceSampling.html">ImportanceSampling.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/VarianceReduction/ImportanceSamplingMassGeometry.html">ImportanceSamplingMassGeometry.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/VarianceReduction/ImportanceSamplingSecondaryBiasing.html">ImportanceSamplingSecondaryBiasing.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/VarianceReduction/SecondaryBiasing.html">SecondaryBiasing.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples-docs/VarianceReduction/WeightWindow.html">WeightWindow.txt</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How to Extend OpenTOPAS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/intro.html">Introduction to Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/geometry.html">Custom Geometry Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/source.html">Custom Particle Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/physics.html">Custom Physics Lists and Physics Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/scoring.html">Custom Scorers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/outcome.html">Custom Outcome Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/filtering.html">Custom Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/field.html">Custom Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/imaging.html">Custom Imaging to Material Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extension-docs/user_hook.html">Additional User Hooks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Provided Extensions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../extensions/rbe/intro.html">Proton RBE Scorers</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../extensions/imaging/index.html">Imaging Extension</a><input aria-label="Toggle navigation of Imaging Extension" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/imaging/imaging_geometries.html">Detector Geometries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/imaging/imaging_scorers.html">Scorers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/imaging/examples_CBCT/cbct.html">CBCT Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../extensions/imaging/examples_PET/pet.html">PET Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../extensions/microdosimetry/intro.html">Microdosimetry Extension</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/OpenTOPAS/TOPAS_Official_Documentation/blob/main/parameters/geometry/patient.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/OpenTOPAS/TOPAS_Official_Documentation/edit/main/parameters/geometry/patient.rst" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <div class="admonition attention">
<p class="admonition-title">Attention</p>
<div class="line-block">
<div class="line"><strong>New: Sign up for TOPAS Announcements Email List</strong></div>
<div class="line">Get updates on user meetings, code releases, and more. </div>
<div class="line">For more, see <a class="reference external" href="https://github.com/OpenTOPAS/OpenTOPAS/discussions/185">https://github.com/OpenTOPAS/OpenTOPAS/discussions/185</a></div>
</div>
</div>
<section id="patient-components">
<h1>Patient Components<a class="headerlink" href="#patient-components" title="Link to this heading"></a></h1>
<p>TOPAS currently supports the following Patient Component types:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Geometry Component</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#geometry-patient-dicom"><span class="std std-ref">Patient in DICOM Format</span></a></p></td>
<td><p>TsDicomPatient</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#geometry-patient-imagecube"><span class="std std-ref">Patient in ImageCube Format (handles XCAT, XiO, MaterialTagNumber and more)</span></a></p></td>
<td><p>TsImageCube (handles XCAT, XiO and more)</p></td>
</tr>
</tbody>
</table>
</div>
<section id="common-parameters">
<span id="geometry-patient-common"></span><h2>Common Parameters<a class="headerlink" href="#common-parameters" title="Link to this heading"></a></h2>
<p>Many of the parameters for Patient Components are common to both TsDicomPatient and TsImageCube. These are described here.</p>
<p>To perform a Monte Carlo simulation, TOPAS needs to map each voxel of the patient image to a material, density and, for useful visualisation, a color.
You specify how to do this by telling TOPAS which <a class="reference internal" href="#imaging-material-conversion"><span class="std std-ref">Imaging to Material Conversion</span></a> scheme to use.</p>
<p>To dump your files raw imaging values to the console:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">b</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">DumpImagingValues</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="kc">&quot;True&quot;</span>
</pre></div>
</div>
<p>Set any parent you like, but it is often convenient to place the patient into a group component which can then be rotated to represent a couch setup:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">Parent</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;PatientGroup&quot;</span>
</pre></div>
</div>
<p>Even though a large number of materials are defined in your HU conversion file, TOPAS will only create those materials that are actually used in your CT image.
In the 4DCT case, if any image introduces new materials that were not in the first image, Geant4 will be unable to proceed (it cannot load new materials after physics has initialized). TOPAS will exit with a warning message advising you to set the parameter:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">b</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">PreLoadAllMaterials</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="kc">&quot;True&quot;</span>
</pre></div>
</div>
<p>Startup will then be slower, since TOPAS will preload the full set of materials defined in your HU conversion file, but your 4DCT will then work.</p>
<p>For single slice thickness images, scoring will use the same voxel divisions as your CT image.
For multiple slice thicknesses, scoring will not know what divisions to use unless you explicitly specify them in your scoring parameters, such as:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">i</span><span class="n">:</span><span class="nc">Sc/MyScorer/</span><span class="na">XBins</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">512</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Sc/MyScorer/</span><span class="na">YBins</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">512</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Sc/MyScorer/</span><span class="na">ZBins</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">256</span>
</pre></div>
</div>
<p>The built-in Geant4 visualization tools do not perform well when a complex voxel structure is loaded. To make visualization more successful, several additional parameters are provided.</p>
<p>There is generally little value in showing all pixels of the image at once. Each slice just covers up the last slice. To instead show only a specific set of slices in any dimension, the following code can be used where the number of slices begins at number 1:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ShowSpecificSlicesZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">4</span><span class="n"> </span><span class="m">1</span><span class="n"> </span><span class="m">3</span><span class="n"> </span><span class="m">9</span><span class="n"> </span><span class="m">12</span><span class="n"> </span><span class="c"># will only show slices 1, 3, 9 and 12.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The slice specification uses the <a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.2.html">patient coordinate system</a>, and not the TOPAS coordinate system.</p>
</div>
<p>Similar slicing is allowed in X and Y.
Three special values are also allowed:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ShowSpecificSlicesZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">1</span><span class="n"> </span><span class="m">0</span><span class="n"> </span><span class="c"># means show all slices</span>
<span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ShowSpecificSlicesZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">1</span><span class="n"> </span><span class="m">-1</span><span class="n"> </span><span class="c"># means only show center slice</span>
<span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ShowSpecificSlicesZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">1</span><span class="n"> </span><span class="m">-2</span><span class="n"> </span><span class="c"># means only first, center and last slice</span>
</pre></div>
</div>
<p>The following will result in a display that shows 27 pixels comprising the boundaries and center of the image. This allows you to see the overall placement of the image and see the individual voxel size:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ShowSpecificSlicesX</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">1</span><span class="n"> </span><span class="m">-2</span><span class="n"> </span><span class="c"># means only show center slice</span>
<span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ShowSpecificSlicesY</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">1</span><span class="n"> </span><span class="m">-2</span><span class="n"> </span><span class="c"># means only show center slice</span>
<span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ShowSpecificSlicesZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">1</span><span class="n"> </span><span class="m">-2</span><span class="n"> </span><span class="c"># means only show center slice</span>
</pre></div>
</div>
<p>You have the Option to Load a Truncated DICOM, XiO or ImageCube.
Parameters to restrict which voxels of a patient image are loaded are:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">i</span><span class="n">:</span><span class="nc">Ge/MyComponent/</span><span class="na">RestrictVoxelsXMin</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Ge/MyComponent/</span><span class="na">RestrictVoxelsYMin</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Ge/MyComponent/</span><span class="na">RestrictVoxelsZMin</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Ge/MyComponent/</span><span class="na">RestrictVoxelsXMax</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Ge/MyComponent/</span><span class="na">RestrictVoxelsYMax</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Ge/MyComponent/</span><span class="na">RestrictVoxelsZMax</span>
</pre></div>
</div>
<p>The previously mentioned parameter, <code class="docutils literal notranslate"><span class="pre">ShowSpecificSlices</span></code>, affects only the graphical output of the voxels.
The voxels were all still loaded, thus affecting the physics results, however only specific voxels were shown in the GUI.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">RestrictVoxels</span></code> parameters have a much more significant effect: they cause TOPAS to not even load some parts of the patient.
This can save a lot of time and allow you to test things on DICOM or other image formats quickly,
as you only have to load whatever part of the DICOM you actually want to use.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>One should be careful when using the <code class="docutils literal notranslate"><span class="pre">RestrictVoxels</span></code> parameter. In contrast to <code class="docutils literal notranslate"><span class="pre">ShowSpecificSlices</span></code> it will actually affect the resulting output and is not simply a way to modify the visualisation.</p>
</div>
<p>Though our main motivation for this work was to find a way to do more rapid development
(testing on real patients without the slowdown of loading everything), these aforementioned parameters may also be of value to our brachytherapy users. For example, for your brachytherapy simulations you may only need to load the part of the image that is near the brachy source.</p>
<p>Alternatively, you can instead specify the maximum number of voxels to show. If the total number of voxels is greater than this limit, TOPAS will just draw the overall DICOM outline:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">i</span><span class="n">:</span><span class="nc">Gr/</span><span class="na">ShowOnlyOutlineIfVoxelCountExceeds</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">8000</span>
</pre></div>
</div>
</section>
<section id="patient-in-dicom-format">
<span id="geometry-patient-dicom"></span><h2>Patient in DICOM Format<a class="headerlink" href="#patient-in-dicom-format" title="Link to this heading"></a></h2>
<p>DICOM importing is handled through the <a class="reference external" href="http://gdcm.sourceforge.net">GDCM</a> package, which can be downloaded alongside the TOPAS source code from the <a class="reference external" href="https://github.com/OpenTOPAS/OpenTOPAS">GitHub repository</a>. Instructions for how to install GDCM can be found in the QuickStart guides in the aforementioned repository.</p>
<p>See the <a class="reference internal" href="../../examples-docs/Patient/DoseToCT.html#example-dicom"><span class="std std-ref">DoseToCT.txt</span></a> and <a class="reference internal" href="../../examples-docs/Patient/DoseTo4DCT.html#example-dicom-time"><span class="std std-ref">DoseTo4DCT.txt</span></a> examples for how to use TsDicomPatient.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before running this example, be sure to unzip the included DICOM files.</p>
</div>
<p>You specify the name of a directory containing one or more .dcm files (one for each slice):</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">DicomDirectory</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;DICOM_Box&quot;</span>
</pre></div>
</div>
<p>To specify a 4DCT, you can have the <code class="docutils literal notranslate"><span class="pre">DicomDirectory</span></code> change according to an TOPAS <a class="reference internal" href="../time.html#time-feature"><span class="std std-ref">Time Feature</span></a>.</p>
<p>Files of other types in this directory will be ignored.
Exact titles of the .dcm files are not important as TOPAS will re-order them based on the slice ordering information inside the DICOM headers.</p>
<p>By default, TOPAS will only consider .dcm files that are from CT. This can be adjusted by setting:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">sv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">DicomModalityTags</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">1</span><span class="n"> </span><span class="s">&quot;CT&quot;</span><span class="n"> </span><span class="c"># defaults to just CT</span>
</pre></div>
</div>
<p>Other modality tags are, for example, <code class="docutils literal notranslate"><span class="pre">&quot;MR&quot;</span></code> for Magnetic Resonance and <code class="docutils literal notranslate"><span class="pre">&quot;US&quot;</span></code> for Ultrasound. A complete list can be found <a class="reference external" href="https://wiki.cancerimagingarchive.net/display/Public/DICOM+Information+Object+Abbreviations">here</a>.</p>
<p>Patient positioning information from the DICOM file is not currently used. You must define the position as you would for any other TOPAS component:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransX</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span><span class="n"> m</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransY</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span><span class="n"> m</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span><span class="n"> m</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">RotX</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span><span class="n"> deg</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">RotY</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span><span class="n"> deg</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">RotZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span><span class="n"> deg</span>
</pre></div>
</div>
<p>You can ask TOPAS to print out the slice separation that it finds in in the DICOM series as follows:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">b</span><span class="n">:</span><span class="nc">Ge/MyComponent/</span><span class="na">ShowSliceSeparations</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="kc">&quot;True&quot;</span>
</pre></div>
</div>
</section>
<section id="dicom-rt-structures">
<h2>DICOM RT-Structures<a class="headerlink" href="#dicom-rt-structures" title="Link to this heading"></a></h2>
<p>TOPAS can also read DICOM RT Structure Sets.
A structure set is an extra file in the DICOM directory (or external file) that provides information on structures such as organs, tumors, PTVs, etc. that have been outlined (contoured) in the planning process. The data is stored as a set of polygons, up to one per slice for each contoured structure. TOPAS can color code DICOM components according to this structure information and can filter scoring based on these structures (see the <code class="docutils literal notranslate"><span class="pre">OnlyIncludeIfInRTStructure</span></code> filter in the <a class="reference internal" href="../scoring/filter.html#scoring-filter"><span class="std std-ref">Filtering Scorers</span></a> section).</p>
<p>TOPAS can automatically detect a DICOM-RT file within the DICOM CT directory. Optionally, user can supply the full path to the DICOM-RT file:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">DicomRTStructFile</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;/full/path/dicom-rt.dcm</span>
</pre></div>
</div>
<p>To make TOPAS color the voxels according to the structure:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">sv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ColorByRTStructNames</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">2</span><span class="n"> </span><span class="s">&quot;R_LUNG&quot;</span><span class="n"> </span><span class="s">&quot;L_LUNG&quot;</span>
<span class="kt">sv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ColorByRTStructColors</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">2</span><span class="n"> </span><span class="s">&quot;yellow&quot;</span><span class="n"> </span><span class="s">&quot;red&quot;</span>
</pre></div>
</div>
<ul>
<li><p>If the structure name includes a space, substitute an underscore in the parameter. So, for example, if the structure name is R LUNG, you should supply the parameter as R_LUNG.</p></li>
<li><p>If you dont actually know what structures are included in your DICOM, still fill in the <code class="docutils literal notranslate"><span class="pre">ColorByRTStructNames</span></code> parameter. Running TOPAS will then result in an error message that includes a list of the known structure names.</p></li>
<li><p>To allow easy testing of this feature in simple DICOM examples that dont really have any structures, the following parameter will fake an RT structure set, assigning the given structure to all voxels in the lower XY quadrant:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">b</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">FakeStructures</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="kc">&quot;True&quot;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="utilities-for-handling-dicom-rt-plan-and-rt-dose-files">
<h2>Utilities for handling DICOM RT-PLAN and RT-DOSE files<a class="headerlink" href="#utilities-for-handling-dicom-rt-plan-and-rt-dose-files" title="Link to this heading"></a></h2>
<p>TOPAS can automatically set DicomOrigin parameters to help with patient positioning.</p>
<p>If you define a set of DicomOrigin parameters for your patient:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">dc</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">DicomOriginX</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.0</span><span class="n"> mm</span>
<span class="kt">dc</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">DicomOriginY</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.0</span><span class="n"> mm</span>
<span class="kt">dc</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">DicomOriginZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.0</span><span class="n"> mm</span>
</pre></div>
</div>
<p>then when you read in a TsDicomPatient, TOPAS will update these parameters on the fly to provide the origin of the DICOM coordinate system specified in the TOPAS coordinate system.</p>
<p>You can combine this information with other information you may have about your isocenter to get your patient properly positioned.
For example, if you just wanted to center your patient in its parent component, such as PatientGroup, you would do:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">Type</span><span class="n">     </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;TsDicomPatient&quot;</span>
<span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">Parent</span><span class="n">   </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;PatientGroup&quot;</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransX</span><span class="n">   </span><span class="o">=</span><span class="n"> </span><span class="m">0.0</span><span class="n"> mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransY</span><span class="n">   </span><span class="o">=</span><span class="n"> </span><span class="m">0.0</span><span class="n"> mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransZ</span><span class="n">   </span><span class="o">=</span><span class="n"> </span><span class="m">0.0</span><span class="n"> mm</span>
</pre></div>
</div>
<p>If you also had isocenter information from at RT-Ion plan in DICOM coordinates:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">d</span><span class="n">:</span><span class="nc">Rt/plan/</span><span class="na">IsoCenterX</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.0</span><span class="n">      mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Rt/plan/</span><span class="na">IsoCenterY</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">-99.9904</span><span class="n"> mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Rt/plan/</span><span class="na">IsoCenterZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">-14.0</span><span class="n">    mm</span>
</pre></div>
</div>
<p>you could adjust the patient to isocenter by doing:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransX</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="nc">Ge/Patient/</span><span class="na">DicomOriginX</span><span class="n"> </span><span class="o">-</span><span class="n"> </span><span class="nc">Rt/plan/</span><span class="na">IsoCenterX</span><span class="n"> mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransY</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="nc">Ge/Patient/</span><span class="na">DicomOriginY</span><span class="n"> </span><span class="o">-</span><span class="n"> </span><span class="nc">Rt/plan/</span><span class="na">IsoCenterY</span><span class="n"> mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="nc">Ge/Patient/</span><span class="na">DicomOriginZ</span><span class="n"> </span><span class="o">-</span><span class="n"> </span><span class="nc">Rt/plan/</span><span class="na">IsoCenterZ</span><span class="n"> mm</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../../examples-docs/Patient/ViewAbdomen_rtdose.html#example-dicom-viewabdomen-rtdose"><span class="std std-ref">ViewAbdomen_rtdose.txt</span></a> for an example of how to use these patient-positioning features.</p>
<p>TOPAS can automatically create a Scoring Grid that exactly matches a provided RTDOSE file in your DICOM dataset.
This makes it easier to compare TOPAS results to Treatment Planning System results.</p>
<p>Tell TOPAS which RTDOSE file to use by providing CloneRTDoseGridFrom parameter, such as:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">CloneRTDoseGridFrom</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="nc">Ge/Patient/</span><span class="na">DicomDirectory</span><span class="n"> </span><span class="o">+</span><span class="n"> </span><span class="s">&quot;/RTDOSE.dcm&quot;</span>
</pre></div>
</div>
<img alt="../../_images/rtdose_grid_option1.png" src="../../_images/rtdose_grid_option1.png" />
<p>You can adjust pixel sizes while keeping the position, such as:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">CloneRTDoseGridFrom</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="nc">Ge/Patient/</span><span class="na">DicomDirectory</span><span class="n"> </span><span class="o">+</span><span class="n"> </span><span class="s">&quot;/rtdose.dcm&quot;</span>
<span class="kt">dv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">CloneRTDoseGridSize</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">3</span><span class="n"> </span><span class="m">5</span><span class="n"> </span><span class="m">5</span><span class="n"> </span><span class="m">8</span><span class="n"> mm</span>
</pre></div>
</div>
<img alt="../../_images/rtdose_grid_option2.png" src="../../_images/rtdose_grid_option2.png" />
<p>In addition, you can define a dose grid without a RTDOSE file by specifying its grid size such as:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">dv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">CloneRTDoseGridSize</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">3</span><span class="n"> </span><span class="m">5</span><span class="n"> </span><span class="m">5</span><span class="n"> </span><span class="m">5</span><span class="n"> mm</span>
</pre></div>
</div>
<p>A dose grid that fits the volume of a TsDicomPatient will be created.</p>
<img alt="../../_images/rtdose_grid_option3.png" src="../../_images/rtdose_grid_option3.png" />
<p>TOPAS will then automatically create a scoring volume in a parallel world to overlay your grid,
and will name this component with the same name as your patient, plus /RTDoseGrid.
You can then score on this component just like on any other component:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Sc/Dose/</span><span class="na">Component</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;Patient/RTDoseGrid&quot;</span>
</pre></div>
</div>
<p>TOPAS Scoring can use information from your DICOM dataset so that scored results can be more easily compared to those from treatment planning systems, by using a consistent coordinate system. See <a class="reference internal" href="../scoring/output.html#scoring-output-dicom"><span class="std std-ref">DICOM Output</span></a> for more information.</p>
</section>
<section id="patient-in-imagecube-format-handles-xcat-xio-materialtagnumber-and-more">
<span id="geometry-patient-imagecube"></span><h2>Patient in ImageCube Format (handles XCAT, XiO, MaterialTagNumber and more)<a class="headerlink" href="#patient-in-imagecube-format-handles-xcat-xio-materialtagnumber-and-more" title="Link to this heading"></a></h2>
<p>We refer to a patient input file as an Image Cube if it is a simple binary file that contains one value for each voxel.
These values may be Housefield units or any other sort of imaging information that you have. Elsewhere you will tell TOPAS how to convert a given value from this file into a specfic material for that voxel.</p>
<ul class="simple">
<li><p>For the case of an XCAT phantom, the binary file will contain, for each voxel, an activation or attenuation value as a float</p></li>
<li><p>For the case of an XiO patient, the binary file will contain, for each voxel, a Hounsfield value as a short</p></li>
<li><p>For the case of a MaterialTagNumber file, the binary file will contain, for each voxel, a material index as a short</p></li>
<li><p>For other cases, you can provide a binary file that contains, for each voxel, any float, int or short</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There may be an additional file for XCAT phantoms, called an XCAT log, that provides metadata. TOPAS needs this metadata, as will be spoken about below.</p>
</div>
<p>An <code class="docutils literal notranslate"><span class="pre">ImagingToMaterialConverter</span></code>, described in the next section, handles the details of how each voxels information is converted to a material specification.</p>
<p>See the <a class="reference internal" href="../../examples-docs/Patient/XCAT.html#example-xcat"><span class="std std-ref">XCAT.txt</span></a> example for how to read in an XCAT file.
See the <a class="reference internal" href="../../examples-docs/Patient/DoseToCT.html#example-dicom"><span class="std std-ref">DoseToCT.txt</span></a> example for how to read in an XiO file.</p>
<p>Specify the file directory and file name:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">InputDirectory</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;./&quot;</span>
<span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">InputFile</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;ctvolume.dat&quot;</span><span class="n"> </span><span class="c"># match exact case</span>
</pre></div>
</div>
<p>As with the <a class="reference internal" href="#geometry-patient-dicom"><span class="std std-ref">Patient in DICOM format</span></a>, to specify a 4DCT, you can have the <code class="docutils literal notranslate"><span class="pre">InputDirectory</span></code> or <code class="docutils literal notranslate"><span class="pre">InputFile</span></code> under the control of a <a class="reference internal" href="../time.html#time-feature"><span class="std std-ref">Time Feature</span></a>.</p>
<p>For a 4DCT, the <code class="docutils literal notranslate"><span class="pre">CacheMaterialMapForEachTimeSlice</span></code> parameter lets you decide whether the material maps for the
various CT phases will be cached (saving time if they are reused again)
or not (saving memory):</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">b</span><span class="n">:</span><span class="nc">Ge/</span><span class="na">CacheMaterialMapForEachTimeSlice</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="kc">&quot;False&quot;</span><span class="n"> </span><span class="c"># defaults to True</span>
</pre></div>
</div>
<p>You must position as you would for any TOPAS component:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">RotX</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span><span class="n"> deg</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">RotY</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">90.</span><span class="n"> deg</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">RotZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span><span class="n"> deg</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransX</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">1.5</span><span class="n"> mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransY</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">3.3</span><span class="n"> mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">TransZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">4.2</span><span class="n"> mm</span>
</pre></div>
</div>
<p>TOPAS then needs some metadata. Specifically it needs to know:</p>
<ul class="simple">
<li><p>How many voxels there are in each dimension</p></li>
<li><p>How large the voxels are in each dimension</p></li>
<li><p>What data type is involved (float, int or short)</p></li>
<li><p>How to convert the given value to a material</p></li>
</ul>
<p>For XCAT phantoms, all of this metadata can come from an XCAT log file:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">MetaDataFile</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;XCAT_FullMouse_86x86x161_atn_1.log&quot;</span>
</pre></div>
</div>
<p>If you had some other form of Image Cube (not XCAT), or you dont want to read this information from an XCAT log file,
you can provide this meta data with the following TOPAS parameters:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">DataType</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;FLOAT&quot;</span><span class="n"> </span><span class="c"># &quot;SHORT&quot;, &quot;INT&quot; or &quot;FLOAT&quot;</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">NumberOfVoxelsX</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">86</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">NumberOfVoxelsY</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">86</span>
<span class="kt">i</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">NumberOfVoxelsZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">161</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">VoxelSizeX</span><span class="n">       </span><span class="o">=</span><span class="n"> </span><span class="m">.5</span><span class="n"> mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">VoxelSizeY</span><span class="n">       </span><span class="o">=</span><span class="n"> </span><span class="m">.5</span><span class="n"> mm</span>
<span class="kt">d</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">VoxelSizeZ</span><span class="n">       </span><span class="o">=</span><span class="n"> </span><span class="m">.5</span><span class="n"> mm</span>
</pre></div>
</div>
<p>If there are multiple slice thicknesses in your image, use vectors to specify the number and thickness of voxels in each section. For example, a 30 slice image that has 10 slices of 2.5 mm and then 20 slices of 1.25 mm:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">NumberOfVoxelsZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">2</span><span class="n"> </span><span class="m">10</span><span class="n"> </span><span class="m">20</span>
<span class="kt">dv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">VoxelSizeZ</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">2</span><span class="n"> </span><span class="m">2.5</span><span class="n"> </span><span class="m">1.25</span><span class="n"> mm</span>
</pre></div>
</div>
<p>If you are using XCAT without providing metadata from an XCAT log file, you should also provide parameters to tell TOPAS what material to use for a given value found in the XCAT binary file, such as:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">u</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">AttenuationForMaterial_XCAT_Air</span><span class="n">    </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span>
<span class="kt">u</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">AttenuationForMaterial_XCAT_Muscle</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">195.2515</span>
<span class="kt">u</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">AttenuationForMaterial_XCAT_Lung</span><span class="n">   </span><span class="o">=</span><span class="n"> </span><span class="m">57.5347</span>
</pre></div>
</div>
</section>
<section id="imaging-to-material-conversion">
<span id="imaging-material-conversion"></span><h2>Imaging to Material Conversion<a class="headerlink" href="#imaging-to-material-conversion" title="Link to this heading"></a></h2>
<p>You are free to write your own converter, including approaches that use alternative imaging modalities (e.g. MRI, pCT, ultrasound), or that use more than one image (e.g. Dual Energy CT, Multi-Energy CT). To write your own converter, see <a class="reference internal" href="../../extension-docs/imaging.html#extension-imaging-material-conversion"><span class="std std-ref">Custom Imaging to Material Conversion</span></a>.</p>
</section>
<section id="xcat">
<h2>XCAT<a class="headerlink" href="#xcat" title="Link to this heading"></a></h2>
<p>TOPAS provides two built-in converters for XCAT and other Image Cube data:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ImagingToMaterialConverter</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;XCAT_Attenuation&quot;</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ImagingToMaterialConverter</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;XCAT_Activity&quot;</span>
</pre></div>
</div>
<p>These converters assume that the value found in the binary file for a given voxel is either an Attenuation or an Activity.
They then convert the given value to a material name from either the metadata file (the XCAT log file) or from the parameters you explicitly provided:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">u</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">AttenuationForMaterial_XCAT_Air</span><span class="n">    </span><span class="o">=</span><span class="n"> </span><span class="m">0.</span>
<span class="kt">u</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">AttenuationForMaterial_XCAT_Muscle</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">195.2515</span>
<span class="kt">u</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">AttenuationForMaterial_XCAT_Lung</span><span class="n">   </span><span class="o">=</span><span class="n"> </span><span class="m">57.5347</span>
</pre></div>
</div>
<p>The actual material name that TOPAS will expect you to define somewhere is the part after <code class="docutils literal notranslate"><span class="pre">&quot;AttenuationForMaterial_&quot;</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">XCAT_Air</span></code> and <code class="docutils literal notranslate"><span class="pre">XCAT_Muscle</span></code>. You need to make sure that these material names have been defined somewhere in your TOPAS parameter file. In the example <a class="reference internal" href="../../examples-docs/Patient/XCAT.html#example-xcat"><span class="std std-ref">XCAT.txt</span></a> we defined these in the <a class="reference internal" href="../../examples-docs/Patient/XCAT_Materials.html#example-xcat-materials"><span class="std std-ref">XCAT_Materials.txt</span></a> file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>With respect to the <a class="reference internal" href="../../examples-docs/Patient/XCAT_Materials.html#example-xcat-materials"><span class="std std-ref">XCAT_Materials.txt</span></a> file, we faked the definitions, defining all the materials as different colors of what is really just water. You could edit this file to provide the real elemental compositions of the various materials.</p></li>
<li><p>We also only defined the materials used in the attenuation part of the XCAT log file. If you instead want to use the materials used in the activity part of the XCAT log file, youll need to define some additional materials (the activity part of that XCAT log file had more materials than the attenuation part).</p></li>
</ul>
</div>
</section>
<section id="materialtagnumber">
<h2>MaterialTagNumber<a class="headerlink" href="#materialtagnumber" title="Link to this heading"></a></h2>
<p>Some of our users have TsImageCube components where each voxel is represented not as a CT number but as an integer tag number, which is a 16-bit integer (C++ short) that corresponds to a particular material name. The <code class="docutils literal notranslate"><span class="pre">ImagingToMaterialConverter</span></code> called MaterialTagNumber will interpret these tag numbers based on a lookup table created by two additional TOPAS vector parameters, <code class="docutils literal notranslate"><span class="pre">MaterialTagNumbers</span></code> and <code class="docutils literal notranslate"><span class="pre">MaterialNames</span></code>. For example:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">Type</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;TsImageCube&quot;</span>
<span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ImagingToMaterialConverter</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;MaterialTagNumber&quot;</span>
<span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">MaterialTagNumbers</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">6</span><span class="n"> </span><span class="m">0</span><span class="n"> </span><span class="m">3</span><span class="n"> </span><span class="m">42</span><span class="n"> </span><span class="m">43</span><span class="n"> </span><span class="m">100</span><span class="n"> </span><span class="m">110</span>
<span class="kt">sv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">MaterialNames</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">6</span><span class="n"> </span><span class="s">&quot;Air&quot;</span><span class="n"> </span><span class="s">&quot;G4_BLOOD_ICRP&quot;</span><span class="n"> </span><span class="s">&quot;G4_BONE_CORTICAL_ICRP&quot;</span><span class="n"> </span><span class="s">&quot;G4_BONE_COMPACT_ICRU&quot;</span><span class="n"> </span><span class="s">&quot;G4_BRAIN_ICRP&quot;</span><span class="n"> </span><span class="s">&quot;G4_MUSCLE_SKELETAL_ICRP&quot;</span>
</pre></div>
</div>
<p>The converter will interpret voxels tagged with the number 0 as Air, 3 as G4_BLOOD_ICRP, 42 as G4_BONE_CORTICAL_ICRP, etc.</p>
</section>
<section id="schneider">
<h2>Schneider<a class="headerlink" href="#schneider" title="Link to this heading"></a></h2>
<p>TOPAS also provides a built-in converter that follows the most common method used in proton therapy for DICOM or XiO patient data:</p>
<ul class="simple">
<li><p>Schneider W, Bortfeld T and Schlegel W. Correlation between CT numbers and tissue parameters needed for Monte Carlo simulations of clinical dose distributions. Phys. Med. Biol. 2000; <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/10701515">45(2):459-78</a>.</p></li>
</ul>
<p>This converter follows the technique developed by Schneider to assign materials based on a single CT image file containing Hounsfield Unit (HU) values. It is selected using:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">s</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">ImagingtoMaterialConverter</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="s">&quot;Schneider&quot;</span>
</pre></div>
</div>
<p>The HU conversion parameters are typically stored in a separate parameter file:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kn">includeFile</span><span class="n"> </span><span class="o">=</span><span class="n"> HUtoMaterialSchneider.txt</span>
</pre></div>
</div>
<p>An example of such a HU conversion parameter file is found in the <a class="reference internal" href="../../examples-docs/Patient/HUtoMaterialSchneider.html#example-hutomaterialschneider"><span class="std std-ref">HUtoMaterialSchneider.txt</span></a> example.</p>
<p>The first set of parameters in the HU file are used to calculate density:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">dv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">DensityCorrection</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">3996</span><span class="n"> </span><span class="m">9.35212</span><span class="n"> </span><span class="m">5.55269</span><span class="n"> </span><span class="m">4.14652</span><span class="n"> ..</span><span class="m">.1</span><span class="n">.</span><span class="m">06255</span><span class="n"> </span><span class="m">1.00275</span><span class="n"> g/cm3</span>
<span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">SchneiderHounsfieldUnitSections</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">8</span><span class="n"> </span><span class="m">-1000</span><span class="n"> </span><span class="m">-98</span><span class="n"> </span><span class="m">15</span><span class="n"> </span><span class="m">23</span><span class="n"> </span><span class="m">101</span><span class="n"> </span><span class="m">2001</span><span class="n"> </span><span class="m">2995</span><span class="n"> </span><span class="m">2996</span>
<span class="kt">uv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">SchneiderDensityOffset</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">7</span><span class="n"> </span><span class="m">0.00121</span><span class="n"> </span><span class="m">1.018</span><span class="n"> </span><span class="m">1.03</span><span class="n"> </span><span class="m">1.003</span><span class="n"> </span><span class="m">1.017</span><span class="n"> </span><span class="m">2.201</span><span class="n"> </span><span class="m">4.54</span>
<span class="kt">uv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">SchneiderDensityFactor</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">7</span><span class="n"> </span><span class="m">0.00103</span><span class="n"> </span><span class="m">0.00089</span><span class="n"> </span><span class="m">0.0</span><span class="n"> </span><span class="m">0.00117</span><span class="n"> </span><span class="m">0.00059</span><span class="n"> </span><span class="m">0.0005</span><span class="n"> </span><span class="m">0.0</span>
<span class="kt">uv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">SchneiderDensityFactorOffset</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">7</span><span class="n"> </span><span class="m">1000.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">1000.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">-2000.</span><span class="n"> </span><span class="m">0.</span>
</pre></div>
</div>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">DensityCorrection</span></code> contains:</p>
<ul class="simple">
<li><p>One value for every possible HU value.</p></li>
<li><p>With values start from <code class="docutils literal notranslate"><span class="pre">Ge/Patient/MinImagingValue</span></code> which defaults to -1000</p></li>
</ul>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">SchneiderHounsfieldUnitSections</span></code>:</p>
<ul>
<li><p>Specifies how to break up the entire set of HU units into several density calculation sections. The HU conversion formula then uses different correction factors for each of these sections.</p></li>
<li><p>The total range (last value minus first value) must equal the number of values in <code class="docutils literal notranslate"><span class="pre">DensityCorrection</span></code>.</p></li>
<li><p>In the above example, the 8 values define 7 sections:</p>
<blockquote>
<div><ul class="simple">
<li><p>Section 1: -1000 to -99</p></li>
<li><p>Section 2: -98 to 14</p></li>
<li><p></p></li>
<li><p>Section 7: 2995 to 2996</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Parameters <code class="docutils literal notranslate"><span class="pre">SchneiderDensityOffset</span></code>, <code class="docutils literal notranslate"><span class="pre">SchneiderDensityFactor</span></code> and <code class="docutils literal notranslate"><span class="pre">SchneiderDensityFactorOffset</span></code> must have one value for each of the density calculation sections. Consequently, their length must be one less than the length of <code class="docutils literal notranslate"><span class="pre">SchneiderHounsfieldUnitSections</span></code>.</p>
<p>Thus, for any specific HU number, we can extract the appropriate:</p>
<ul class="simple">
<li><p>DensityCorrection</p></li>
<li><p>SchneiderDensityOffset</p></li>
<li><p>SchneiderDensityFactor</p></li>
<li><p>SchneiderDensityFactorOffset</p></li>
</ul>
<p>And use these in the Schneider formula:</p>
<ul class="simple">
<li><p>Density = ( Offset + ( Factor * ( FactorOffset + HU[-1000,2995] ) ) ) * DensityCorrection</p></li>
</ul>
<p>The second set of parameters in the HU file are used to calculate material name and graphics color:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">iv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">SchneiderHUToMaterialSections</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">26</span><span class="n"> </span><span class="m">-1000</span><span class="n"> </span><span class="m">-950</span><span class="n"> </span><span class="m">-120</span><span class="n"> </span><span class="m">-83</span><span class="n"> ... </span><span class="m">1500</span><span class="n"> </span><span class="m">2995</span><span class="n"> </span><span class="m">2996</span>
<span class="kt">sv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">SchneiderElements</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">13</span><span class="n"> </span><span class="s">&quot;Hydrogen&quot;</span><span class="n"> </span><span class="s">&quot;Carbon&quot;</span><span class="n"> </span><span class="s">&quot;Nitrogen&quot;</span><span class="n"> </span><span class="s">&quot;Oxygen&quot;</span><span class="n"> ...</span>
<span class="kt">uv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">SchneiderMaterialsWeight1</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">13</span><span class="n"> </span><span class="m">0.0</span><span class="n">   </span><span class="m">0.0</span><span class="n">   </span><span class="m">0.755</span><span class="n"> </span><span class="m">0.232</span><span class="n"> ...</span>
<span class="kt">uv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">SchneiderMaterialsWeight2</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">13</span><span class="n"> </span><span class="m">0.103</span><span class="n"> </span><span class="m">0.105</span><span class="n"> </span><span class="m">0.031</span><span class="n"> </span><span class="m">0.749</span><span class="n"> ...</span>
<span class="n">...</span>
<span class="kt">iv</span><span class="n">:</span><span class="nc">Gr/Color/</span><span class="na">PatientTissue1</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">3</span><span class="n">  </span><span class="m">63</span><span class="n"> </span><span class="m">63</span><span class="n"> </span><span class="m">63</span>
<span class="kt">iv</span><span class="n">:</span><span class="nc">Gr/Color/</span><span class="na">PatientTissue2</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">3</span><span class="n"> </span><span class="m">100</span><span class="n">  </span><span class="m">0</span><span class="n">  </span><span class="m">0</span>
<span class="n">...</span>
</pre></div>
</div>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">SchneiderHUToMaterialSections</span></code>:</p>
<ul>
<li><p>Specifies how to break up the entire set of HU units into several material name assignment sections.</p></li>
<li><p>The total range (last value minus first value) must equal the number of values in <code class="docutils literal notranslate"><span class="pre">DensityCorrection</span></code>.</p></li>
<li><p>In the above example, the 26 values define 25 material name assignment sections:</p>
<blockquote>
<div><ul class="simple">
<li><p>Section 1: -1000 to -949</p></li>
<li><p>Section 2: -50 to -119</p></li>
<li><p></p></li>
<li><p>Section 25: 2995 to 2996</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">SchneiderElements</span></code>:</p>
<ul class="simple">
<li><p>Specifies all of the elements that will be used in the patient.</p></li>
<li><p>All patient materials must be composed from combinations of this set of elements.</p></li>
</ul>
<p>For the parameters <code class="docutils literal notranslate"><span class="pre">SchneiderMaterialsWeight1</span></code> through <code class="docutils literal notranslate"><span class="pre">SchneiderMaterialsWeight25</span></code>:</p>
<ul>
<li><p>There should be one of these parameters for each of the material name assignment sections. The length of <code class="docutils literal notranslate"><span class="pre">SchneiderMaterialsWeight</span></code> must equal the length of <code class="docutils literal notranslate"><span class="pre">SchneiderElements</span></code>.</p></li>
<li><p>Each value in <code class="docutils literal notranslate"><span class="pre">SchneiderMaterialsWeight</span></code> details what proportion of the given element in <code class="docutils literal notranslate"><span class="pre">SchneiderElements</span></code> to use in this material.</p></li>
<li><p>In our <code class="docutils literal notranslate"><span class="pre">SchneiderMaterialsWeight2</span></code> parameter, the values: 0.103 0.105 0.031 0.749 mean:</p>
<blockquote>
<div><ul class="simple">
<li><p>10.3 percent of the first element, Hydrogen</p></li>
<li><p>10.5 percent of the second element, Carbon</p></li>
<li><p>3.1 percent of the second element, Nitrogen</p></li>
<li><p>74.9 percent of the second element, Oxygen</p></li>
</ul>
</div></blockquote>
</li>
<li><p>You may optionally provide this parameter to override the default mean excitation energies of some or all of the materials.</p></li>
<li><p>There should be one value for each material name assignment section.</p></li>
<li><p>To use the default mean excitation energy for a particular material, enter that value as 0.</p></li>
<li><p>For example, the following just overrides defaults for two out of 25 assignment sections:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="kt">dv</span><span class="n">:</span><span class="nc">Ge/Patient/</span><span class="na">SchneiderMaterialMeanExcitationEnergy</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="m">25</span><span class="n"> </span><span class="m">88.8</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">77.7</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span>
<span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> </span><span class="m">0.</span><span class="n"> eV</span>
</pre></div>
</div>
</li>
</ul>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">Gr/Color/PatientTissue1</span></code>:</p>
<ul class="simple">
<li><p>Specifies what colors should be assigned to each of the materials.</p></li>
<li><p>There should be one of these parameters for each of the <code class="docutils literal notranslate"><span class="pre">SchneiderHUToMaterialSections</span></code>.</p></li>
<li><p>The three values specify the Red, Green and Blue components of the color.</p></li>
</ul>
<p>Putting it all together, we have now specified density, material name, color and, optionally, mean excitation energy, for each of the Hounsfield numbers in the patient.</p>
<p>You can review the material definitions that TOPAS created based on your patient file and the HU conversion settings. The following parameter tells TOPAS to dump parameters to a file:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="nc">Ts/</span><span class="na">DumpNonDefaultParameters</span><span class="n"> </span><span class="o">=</span><span class="n"> </span><span class="kc">&quot;True&quot;</span>
</pre></div>
</div>
<p>For each HU number that was used in the patient file, you will see a set of parameters starting with <code class="docutils literal notranslate"><span class="pre">Ma/PatientTissueFromHU</span></code> followed by an HU number.
For example, for HU number -295, you may see:</p>
<div class="highlight-topas notranslate"><div class="highlight"><pre><span></span><span class="nc">Ma/</span><span class="na">PatientTissueFromHU</span><span class="o">-</span><span class="m">295</span><span class="n">/Component </span><span class="o">=</span><span class="n"> </span><span class="m">9</span><span class="n"> Hydrogen Carbon Nitrogen Oxygen Phosphorus Sulfur Chlorine Sodium Potassium</span>
<span class="nc">Ma/</span><span class="na">PatientTissueFromHU</span><span class="o">-</span><span class="m">295</span><span class="n">/Fractions </span><span class="o">=</span><span class="n"> </span><span class="m">9</span><span class="n"> </span><span class="m">0.103</span><span class="n"> </span><span class="m">0.105</span><span class="n"> </span><span class="m">0.031</span><span class="n"> </span><span class="m">0.749</span><span class="n"> </span><span class="m">0.002</span><span class="n"> </span><span class="m">0.003</span><span class="n"> </span><span class="m">0.003</span><span class="n"> </span><span class="m">0.002</span><span class="n"> </span><span class="m">0.002</span>
<span class="nc">Ma/</span><span class="na">PatientTissueFromHU</span><span class="o">-</span><span class="m">295</span><span class="n">/Density </span><span class="o">=</span><span class="n"> </span><span class="m">0.707487</span><span class="n"> g/cm3</span>
<span class="nc">Ma/</span><span class="na">PatientTissueFromHU</span><span class="o">-</span><span class="m">295</span><span class="n">/DefaultColor </span><span class="o">=</span><span class="n"> PatientTissue2</span>
</pre></div>
</div>
<p>where you then follow the <code class="docutils literal notranslate"><span class="pre">DefaultColor</span></code> parameter named <code class="docutils literal notranslate"><span class="pre">PatientTissue2</span></code> to see that <code class="docutils literal notranslate"><span class="pre">Gr/Color/PatientTissue2</span></code> is <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">100</span> <span class="pre">0</span> <span class="pre">0</span></code> which means a mixture of 100 percent Red, 0 percent green, 0 percent blue.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../source/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Particle Sources</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="specialized.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Specialized Components</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, 2024, The TOPAS Collaboration
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Patient Components</a><ul>
<li><a class="reference internal" href="#common-parameters">Common Parameters</a></li>
<li><a class="reference internal" href="#patient-in-dicom-format">Patient in DICOM Format</a></li>
<li><a class="reference internal" href="#dicom-rt-structures">DICOM RT-Structures</a></li>
<li><a class="reference internal" href="#utilities-for-handling-dicom-rt-plan-and-rt-dose-files">Utilities for handling DICOM RT-PLAN and RT-DOSE files</a></li>
<li><a class="reference internal" href="#patient-in-imagecube-format-handles-xcat-xio-materialtagnumber-and-more">Patient in ImageCube Format (handles XCAT, XiO, MaterialTagNumber and more)</a></li>
<li><a class="reference internal" href="#imaging-to-material-conversion">Imaging to Material Conversion</a></li>
<li><a class="reference internal" href="#xcat">XCAT</a></li>
<li><a class="reference internal" href="#materialtagnumber">MaterialTagNumber</a></li>
<li><a class="reference internal" href="#schneider">Schneider</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=3304f9e4"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/search.js?v=71be8f69"></script>
    </body>
</html>