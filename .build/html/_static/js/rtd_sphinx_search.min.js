const MAX_SUGGESTIONS=50,MAX_SECTION_RESULTS=3,MAX_SUBSTRING_LIMIT=200,ANIMATION_TIME=200,FETCH_RESULTS_DELAY=100,CLEAR_RESULTS_DELAY=150;let current_request=null;if(window.hasOwnProperty("READTHEDOCS_DATA"))var project=READTHEDOCS_DATA.project,version=READTHEDOCS_DATA.version,api_host=READTHEDOCS_DATA.proxied_api_host||"/_";const generateAndReturnInitialHtml=()=>{let e='<div class="search__outer">             <div class="search__outer__input__wrapper">                 <input class="search__outer__input" spellcheck="false" placeholder="Search">                 <span class="bar"></span>                 <div class="dropdown" tabindex="0">                     <button class="dropbtn">Type                        <i class="arrow down"></i>                    </button>                     <ul class="dropdown-content">                         <li><a href="#"><input type="checkbox" id="drp-classes" checked/><label for="drp-classes">&nbsp;&nbsp;Classes</label></a></li>                         <li><a href="#"><input type="checkbox" id="drp-methods" checked/><label for="drp-methods">&nbsp;&nbsp;Methods</label></a></li>                         <li><a href="#"><input type="checkbox" id="drp-attrs" checked/><label for="drp-attrs">&nbsp;&nbsp;Attributes</label></a></li>                         <li><a href="#"><input type="checkbox" id="drp-params" checked/><label for="drp-params">&nbsp;&nbsp;Parameters</label></a></li>                         <li><a href="#"><input type="checkbox" id="drp-docs" checked/><label for="drp-docs">&nbsp;&nbsp;Docstring</label></a></li>                     </ul>                 </div>                 <div class="search__cross" title="Close">                     <!--?xml version="1.0" encoding="UTF-8"?-->                     <svg class="search__cross__img" width="15px" height="15px" enable-background="new 0 0 96 96" version="1.1" viewBox="0 0 96 96" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">                         <polygon fill="#AAAAAB" points="96,14 82,0 48,34 14,0 0,14 34,48 0,82 14,96 48,62 82,96 96,82 62,48 "></polygon>                     </svg>             </div>             </div>         </div>         <div class="rtd__search__credits">             Search by <a href="https://readthedocs.org/">Read the Docs</a> & <a href="https://github.com/harshil21/furo-sphinx-search">furo-sphinx-search</a>         </div>',t=createDomNode("div",{class:"search__outer__wrapper search__backdrop"});return t.innerHTML=e,t},debounce=(e,t)=>{let r,l=function(){let l=this,s=arguments;clearTimeout(r),r=setTimeout(()=>e.apply(l,s),t)};return l.cancel=()=>{clearTimeout(r),r=null},l},buildSection=function(e,t,r,l){let s=createDomNode("span",{class:"search__result__subheading"});s.innerHTML=t;let n=createDomNode("div",{class:"outer_div_page_results",id:e});n.appendChild(s);for(var a=0;a<l.length;a+=1){let o=createDomNode("p",{class:"search__result__content"});o.innerHTML=l[a],n.appendChild(o)}let c=createDomNode("a",{href:r});return c.appendChild(n),c},updateSearchBar=()=>{getInputField().value=getSearchTerm()},isModalVisible=()=>{let e=document.querySelector(".search__outer__wrapper");return null!==e&&null!==e.style&&null!==e.style.display&&"block"===e.style.display},createDomNode=(e,t)=>{let r=document.createElement(e);if(null!==t)for(let l in t)r.setAttribute(l,t[l]);return r},get_section_html=(e,t,r)=>{let l=e.title,s=e.highlights;s.title.length&&(l=s.title[0]);let n=[e.content.substring(0,200)];if(s.content.length){let a=s.content;n=[];for(let o=0;o<a.length&&o<3;++o)n.push(a[o])}let c;return buildSection("hit__"+r,l,`${t}#${e.id}`,n)},get_domain_html=(e,t,r)=>{let l=`${t}#${e.id}`,s=e.role,n=e.name,a=e.content.substr(0,200),o=e.highlights;o.name.length&&(n=o.name[0]),o.content.length&&(a=o.content[0]);let c="hit__"+r,i=createDomNode("div",{class:"search__domain_role_name"});return i.innerText=s,buildSection(c,n+=i.outerHTML,l,[a])},generateSingleResult=(e,t,r,l)=>{for(let s=0;s<e.blocks.length;++s){let n=e.blocks[s];if("domain"===n.type){let a=n.role.substr(3);void 0!==l[a]&&!l[a]&&(e.blocks.splice(s,1),--s)}else"section"===n.type&&!l.docs&&(e.blocks.splice(s,1),--s)}if(0===e.blocks.length)return;let o=e.path,c=e.title,i=e.highlights;i.title.length&&(c=i.title[0]);let d=createDomNode("h2",{class:"search__result__title"});if(d.innerHTML=c,t!==e.project.slug){let u=createDomNode("small",{class:"rtd_ui_search_subtitle"});u.innerText=`(from project ${e.project})`,d.appendChild(u)}d.appendChild(createDomNode("br"));let h=createDomNode("a",{href:o});h.appendChild(d);let p=createDomNode("div");p.appendChild(h);let g=createDomNode("br",{class:"br-for-hits"});for(let v=0;v<e.blocks.length;++v){let m=e.blocks[v],b=null;r+=1,"section"===m.type?b=get_section_html(m,o,r):"domain"===m.type&&(b=get_domain_html(m,o,r)),null!==b&&(p.appendChild(b),p.appendChild(g))}return p},generateSuggestionsList=(e,t)=>{let r=createDomNode("div",{class:"search__result__box"}),l=Math.min(50,e.results.length),s=0,n={class:document.getElementById("drp-classes").checked,method:document.getElementById("drp-methods").checked,parameter:document.getElementById("drp-params").checked,attribute:document.getElementById("drp-attrs").checked,docs:document.getElementById("drp-docs").checked};n.property=n.attribute,n.exception=n.class,n.data=n.attribute,n.module=n.docs,n.function=n.method;for(let a=0;a<l;++a){let o=generateSingleResult(e.results[a],t,s,n);if(void 0!==o){let c=createDomNode("div",{class:"search__result__single"});c.appendChild(o),r.appendChild(c),s+=e.results[a].blocks.length}}return 0===s?null:r},removeAllActive=()=>{let e=document.querySelectorAll(".outer_div_page_results.active"),t=Object.keys(e).map(t=>e[t]);for(let r=1;r<=t.length;++r)t[r-1].classList.remove("active")},addActive=e=>{let t=document.querySelector("#hit__"+e);null!==t&&(t.classList.add("active"),t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))},selectNextResult=e=>{let t=document.querySelectorAll(".outer_div_page_results"),r=document.querySelector(".outer_div_page_results.active"),l=1,s=1;if(t.length>0){let n=t[t.length-1];if(null!==n.id){let a=n.id.match(/\d+/);null!==a&&(s=Number(a[0]))}}if(null!==r&&null!==r.id){let o=r.id.match(/\d+/);null!==o&&(l=Number(o[0]),l+=e?1:-1)}l<=0?l=s:l>s&&(l=1),removeAllActive(),addActive(l)},getInputField=()=>{let e;try{if(void 0===(e=document.querySelector("[role='search'] input"))||null===e)throw"'[role='search'] input' not found"}catch(t){e=document.querySelector("input[name='q']")}return e},getSearchTerm=()=>{let e=document.querySelector(".search__outer__input");return null!==e&&e.value||""},removeResults=()=>{let e=document.querySelectorAll(".search__result__box");for(let t=0;t<e.length;++t)e[t].parentElement.removeChild(e[t])},getErrorDiv=e=>{let t=createDomNode("div",{class:"search__result__box search__error__box"});return t.innerHTML=e,t},fetchAndGenerateResults=(e,t,r)=>{let l=document.querySelector(".search__outer");removeResults();let s=createDomNode("div",{class:"search__result__box"});return s.innerHTML="<strong>Searching...</strong>",l.appendChild(s),debounce(()=>{updateSearchBar();let s=e+"?"+new URLSearchParams(t).toString();fetch(s,{method:"GET"}).then(e=>{if(!e.ok)throw console.log(e),Error();return e.json()}).then(e=>{if(e.results.length>0){let t=generateSuggestionsList(e,r);if(removeResults(),t)l.appendChild(t),l.addEventListener("mouseenter",e=>{removeAllActive()});else{let s=getErrorDiv("No results found");l.appendChild(s)}}else{removeResults();let n=getErrorDiv("No results found");l.appendChild(n)}}).catch(e=>{console.log(e),removeResults();let t=getErrorDiv("There was an error. Please try again.");l.appendChild(t)})},100)},showSearchModal=()=>{let e=function(){let e=getInputField();e.blur();let t=document.querySelector(".search__outer__input");null!==t&&(t.value=e.value,""!==e.value&&null===document.querySelector(".search__result__box")&&generateResults(),t.focus())};if(window.jQuery)$(".search__outer__wrapper").fadeIn(200,e);else{let t=document.querySelector(".search__outer__wrapper");t&&t.style&&(t.style.display="block"),e()}},removeSearchModal=()=>{updateSearchBar();let e=document.querySelector(".search__outer__input");if(null!==e&&e.blur(),window.jQuery)$(".search__outer__wrapper").fadeOut(200);else{let t=document.querySelector(".search__outer__wrapper");t&&t.style&&(t.style.display="none")}},generateResults=()=>{let e=getSearchTerm();if(updateSearchBar(),e.length>0){null!==current_request&&current_request.cancel();let t=api_host+"/api/v3/search/",r="project:"+project+"/"+version+" "+e,l={q:r};(current_request=fetchAndGenerateResults(t,l,project))()}else{let s=()=>{removeResults()};null!==current_request&&current_request.cancel(),debounce(s,150)()}};window.addEventListener("DOMContentLoaded",()=>{if(window.hasOwnProperty("READTHEDOCS_DATA")){let e=generateAndReturnInitialHtml();document.body.appendChild(e);let t=document.querySelector(".search__outer__wrapper"),r=document.querySelector(".search__outer__input"),l=document.querySelector(".search__cross"),s=getInputField();s.addEventListener("focus",e=>{showSearchModal()}),r.addEventListener("input",e=>{generateResults()}),r.addEventListener("keydown",e=>{if(40===e.keyCode&&(e.preventDefault(),selectNextResult(!0)),38===e.keyCode&&(e.preventDefault(),selectNextResult(!1)),13===e.keyCode){e.preventDefault();let t=document.querySelector(".outer_div_page_results.active");if(null!==t){let r=t.parentElement.href;window.location.href=r}else{let l=getInputField(),n=l.parentElement;s.value=getSearchTerm(),n.submit()}}}),t.addEventListener("click",e=>{e.target.parentNode===document.body&&removeSearchModal()}),l.addEventListener("click",e=>{removeSearchModal()}),document.addEventListener("keydown",e=>{27===e.keyCode&&removeSearchModal()}),document.addEventListener("keydown",e=>{191!==e.keyCode||isModalVisible()||(e.preventDefault(),showSearchModal())});let n=document.querySelector(".dropbtn");n.addEventListener("click",e=>{let t=window.getComputedStyle(document.querySelector(".dropdown-content",":focus-within")),r=parseFloat(t.maxHeight.substring(0,t.maxHeight.length-2));document.activeElement===n&&300===r&&n.blur()});document.querySelector(".dropdown-content").addEventListener("change",e=>{generateResults()})}else console.log("[INFO] Docs are not being served on Read the Docs, readthedocs-sphinx-search will not work.")});